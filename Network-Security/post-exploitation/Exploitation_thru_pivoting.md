

# Exploitation Through Pivoting 


Thanks to the power of Pivoting, we can move around the target network easily and quickly. We will 
leverage this potential to attack and exploit new hosts. We should at this point use our exploitation 
skills


This lets us introduce a very powerful attacking technique that proves to be extremely useful during 
post exploitation (and other areas), this is called Pass The Hash

A weakness in the Windows authentication protocols allows users to log on the OS by just providing 
the hashed verison of the password (NT or LM) instead of the actual cleartext password

When the same password is used on multiple hosts within a network and you get the hash of the 
password from on of these hosts, you automatically have access to all other machines. Even though 
you dont know the actual password (for example, it takes too long to crack)

this is because there is no salt in Windows passwords

Tools and Metasploit modules have been produced to exploit the weakness and get the most out of 
it: execution of shellcode


Since we have already dumped hashes from the first machine, if the same user, with the same
password exists on other machines, we should be able to get access to all of them

The beauty of this attack, is that we do not even need to crack the password hashes and get the 
plain text. We only need the hashes 


The Metasploit module we can use to run pass-the-hash attacks is called psexec


We configure the module with the following information: 

A payload to use

The remote host on which the attack will run 

The user account to use (SMBUser)

The password hash for the accoount (SMBPass)


Then run the exploit, if it works we will obtain a new meterpreter session on the new victim machine


Now that we have full control of the new host, we can start over the post-exploitation process
from this host in order to get more information about the organization, its services, hosts, networks
and so on

Notice that the same steps can be used with almost all other metasploit modules. For example, 
if we find a vulnerable service on one of the internal machines, we just need to select and run the
correct metasploit module

Moreover, remember that you can also run exploits through proxychains. This means that if Metasploit 
does not offer any module for that specific vulnerability, but you have a working exploit, you can 
pivot it to the internal network via proxychains or socks4a

